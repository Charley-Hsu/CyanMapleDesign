{"dependencies":[],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (options = {}) {\n  // function success(arr){\n  //     alert(11)\n  //     if(typeof options.success=='function'){\n  //         options.success(arr.length==1?arr[0]:arr)\n  //     }\n  // }\n\n  var arr = [],\n      result;\n  if (typeof options.url == 'string') {\n    arr.push(options.url);\n  } else if (Array.isArray(options.url) && options.url.every(item => typeof item === 'string')) {\n    arr = options.url;\n  } else {\n    return;\n  }\n\n  switch (options.type) {\n    case 'image':\n    case 'img':\n      result = Promise.all(arr.map(loadImg));\n      break;\n    case 'iframe':\n      result = Promise.all(arr.map(loadIframe));\n      break;\n    default:\n      break;\n  }\n\n  result.then(function (rs) {\n    var succ = rs.filter(d => d !== null),\n        fail = rs.filter(d => d === null);\n    options.success && options.success(rs.length > 1 ? rs : rs[0]);\n    // options.error && options.error(  )\n  }, function () {});\n  // if(options.type=='image'||options.type=='img'){\n  //\n  // }\n  // else if(options.type=='iframe'){\n  //\n  //     var iframeArr=[]\n  //\n  //     arr.forEach(function(item,index,array){\n  //         var iframe = document.createElement(\"iframe\");\n  //         iframe.src = item;\n  //         if (iframe.attachEvent) {\n  //             iframe.attachEvent(\"onload\", function() {\n  //                 iframeArray.push(iframe)\n  //                 if(iframe.Array.length=arr.length){\n  //                     success(iframe)\n  //                 }\n  //             });\n  //         } else {\n  //             iframe.onload = function() {\n  //                 iframeArray.push(iframe)\n  //                 if(iframe.Array.length=arr.length){\n  //                     success(iframe)\n  //                 }\n  //             };\n  //         }\n  //     })\n  // }\n};\n\nif (!('Promise' in window)) {\n  window.Promise = function (exec) {\n    var defer = $.Deferred();\n\n    exec(defer.resolve, defer.reject);\n\n    return defer.promise();\n  };\n\n  window.Promise.all = function (arr) {\n    var i = 0,\n        j = arr.length,\n        defer = $.Deferred(),\n        rs = new Array(j);\n\n    arr.map((d, index) => {\n      d.then(function (obj) {\n        i++;\n\n        rs[index] = obj;\n\n        if (i === j) {\n          defer.resolve(rs);\n        }\n      });\n    });\n\n    return defer.promise();\n  };\n}\n\nfunction loadIframe(src) {\n  return new Promise(function (resolve, reject) {\n    let dom = document.createElement('iframe');\n    dom.onload = function () {\n      // var obj = {};\n      // obj[src] = this;\n      //\n      // console.log(src, ' 加载成功');\n      resolve(this);\n    };\n    dom.onerror = function () {\n      // var obj = {};\n      // obj[src] = null;\n      // console.log(src, ' 加载失败', arguments);\n      resolve(null);\n    };\n    dom.style.display = 'none';\n    dom.src = src;\n    document.body.appendChild(dom);\n  });\n}\n\nfunction loadImg(src) {\n  return new Promise(function (resolve, reject) {\n    let dom = document.createElement('img');\n    dom.onload = function () {\n      // var obj = {};\n      // obj[src] = this;\n      //\n      // console.log(src, ' 加载成功');\n      resolve(this);\n    };\n    dom.onerror = function () {\n      // var obj = {};\n      // obj[src] = null;\n      // console.log(src, ' 加载失败', arguments);\n      resolve(null);\n    };\n    dom.src = src;\n  });\n}"},"hash":"f77bc6df2d3737ec7c861a57b94c3f96"}