{"dependencies":[{"name":"./animate"},{"name":"./util"}],"generated":{"js":"\"use strict\";var e=require(\"./animate\"),t=i(e),_=require(\"./util\");function i(e){return e&&e.__esModule?e:{default:e}}var o='\\n<div class=\"scroller-component\" data-role=\"component\">\\n  <div class=\"scroller-mask\" data-role=\"mask\"></div>\\n  <div class=\"scroller-indicator\" data-role=\"indicator\"></div>\\n  <div class=\"scroller-content\" data-role=\"content\"></div>\\n</div>\\n',l=function(e,t){var i=this;t=t||{},i.options={itemClass:\"scroller-item\",onSelect:function(){},defaultValue:0,data:[]};for(var l in t)void 0!==t[l]&&(i.options[l]=t[l]);i.__container=(0,_.getElement)(e);var n=document.createElement(\"div\");n.innerHTML=t.template||o;var a=i.__component=n.querySelector(\"[data-role=component]\"),r=i.__content=a.querySelector(\"[data-role=content]\"),c=a.querySelector(\"[data-role=indicator]\"),s=i.options.data,u=\"\";s.length&&s[0].constructor===Object?s.forEach(function(e){u+='<div class=\"'+i.options.itemClass+'\" data-value=\"'+e.value+'\">'+e.name+\"</div>\"}):s.forEach(function(e){u+='<div class=\"'+i.options.itemClass+'\" data-value=\"'+e+'\">'+e+\"</div>\"}),r.innerHTML=u,i.__container.appendChild(a),i.__itemHeight=parseInt((0,_.getComputedStyle)(c,\"height\"),10),i.__callback=t.callback||function(e){r.style.webkitTransform=\"translate3d(0, \"+-e+\"px, 0)\"};var p=a.getBoundingClientRect();i.__clientTop=p.top+a.clientTop||0,i.__setDimensions(a.clientHeight,r.offsetHeight),0===a.clientHeight&&i.__setDimensions(parseInt((0,_.getComputedStyle)(a,\"height\"),10),204),i.select(i.options.defaultValue,!1),a.addEventListener(\"touchstart\",function(e){e.target.tagName.match(/input|textarea|select/i)||(e.preventDefault(),i.__doTouchStart(e.touches,e.timeStamp))},!1),a.addEventListener(\"touchmove\",function(e){i.__doTouchMove(e.touches,e.timeStamp)},!1),a.addEventListener(\"touchend\",function(e){i.__doTouchEnd(e.timeStamp)},!1)},n={value:null,__prevValue:null,__isSingleTouch:!1,__isTracking:!1,__didDecelerationComplete:!1,__isGesturing:!1,__isDragging:!1,__isDecelerating:!1,__isAnimating:!1,__clientTop:0,__clientHeight:0,__contentHeight:0,__itemHeight:0,__scrollTop:0,__minScrollTop:0,__maxScrollTop:0,__scheduledTop:0,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollTop:null,__maxDecelerationScrollTop:null,__decelerationVelocityY:null,__setDimensions:function(e,t){var _=this;_.__clientHeight=e,_.__contentHeight=t;var i=_.options.data.length,o=Math.round(_.__clientHeight/_.__itemHeight);_.__minScrollTop=-_.__itemHeight*(o/2),_.__maxScrollTop=_.__minScrollTop+i*_.__itemHeight-.1},selectByIndex:function(e,t){var _=this;e<0||e>_.__content.childElementCount-1||(_.__scrollTop=_.__minScrollTop+e*_.__itemHeight,_.scrollTo(_.__scrollTop,t),_.__selectItem(_.__content.children[e]))},select:function(e,t){for(var _=this,i=_.__content.children,o=0,l=i.length;o<l;o++)if(i[o].dataset.value===e)return void _.selectByIndex(o,t);_.selectByIndex(0,t)},getValue:function(){return this.value},scrollTo:function(e,_){var i=this;if(_=void 0===_||_,i.__isDecelerating&&(t.default.stop(i.__isDecelerating),i.__isDecelerating=!1),e=Math.round(e/i.__itemHeight)*i.__itemHeight,(e=Math.max(Math.min(i.__maxScrollTop,e),i.__minScrollTop))===i.__scrollTop||!_)return i.__publish(e),void i.__scrollingComplete();i.__publish(e,250)},destroy:function(){this.__component.parentNode&&this.__component.parentNode.removeChild(this.__component)},__selectItem:function(e){var t=this,_=t.options.itemClass+\"-selected\",i=t.__content.querySelector(\".\"+_);i&&i.classList.remove(_),e.classList.add(_),null!==t.value&&(t.__prevValue=t.value),t.value=e.dataset.value},__scrollingComplete:function(){var e=this,t=Math.round((e.__scrollTop-e.__minScrollTop-e.__itemHeight/2)/e.__itemHeight);e.__selectItem(e.__content.children[t]),null!==e.__prevValue&&e.__prevValue!==e.value&&e.options.onSelect(e.value)},__doTouchStart:function(e,_){var i,o=this;if(null==e.length)throw new Error(\"Invalid touch list: \"+e);if(_ instanceof Date&&(_=_.valueOf()),\"number\"!=typeof _)throw new Error(\"Invalid timestamp value: \"+_);o.__interruptedAnimation=!0,o.__isDecelerating&&(t.default.stop(o.__isDecelerating),o.__isDecelerating=!1,o.__interruptedAnimation=!0),o.__isAnimating&&(t.default.stop(o.__isAnimating),o.__isAnimating=!1,o.__interruptedAnimation=!0);var l=1===e.length;i=l?e[0].pageY:Math.abs(e[0].pageY+e[1].pageY)/2,o.__initialTouchTop=i,o.__lastTouchTop=i,o.__lastTouchMove=_,o.__lastScale=1,o.__enableScrollY=!l,o.__isTracking=!0,o.__didDecelerationComplete=!1,o.__isDragging=!l,o.__isSingleTouch=l,o.__positions=[]},__doTouchMove:function(e,t,_){var i=this;if(null==e.length)throw new Error(\"Invalid touch list: \"+e);if(t instanceof Date&&(t=t.valueOf()),\"number\"!=typeof t)throw new Error(\"Invalid timestamp value: \"+t);if(i.__isTracking){var o;o=2===e.length?Math.abs(e[0].pageY+e[1].pageY)/2:e[0].pageY;var l=i.__positions;if(i.__isDragging){var n=o-i.__lastTouchTop,a=i.__scrollTop;if(i.__enableScrollY){a-=n;var r=i.__minScrollTop,c=i.__maxScrollTop;(a>c||a<r)&&(a=a>c?c:r)}l.length>40&&l.splice(0,20),l.push(a,t),i.__publish(a)}else{var s=Math.abs(o-i.__initialTouchTop);i.__enableScrollY=s>=0,l.push(i.__scrollTop,t),i.__isDragging=i.__enableScrollY&&s>=5,i.__isDragging&&(i.__interruptedAnimation=!1)}i.__lastTouchTop=o,i.__lastTouchMove=t,i.__lastScale=_}},__doTouchEnd:function(e){var t=this;if(e instanceof Date&&(e=e.valueOf()),\"number\"!=typeof e)throw new Error(\"Invalid timestamp value: \"+e);if(t.__isTracking){if(t.__isTracking=!1,t.__isDragging&&(t.__isDragging=!1,t.__isSingleTouch&&e-t.__lastTouchMove<=100)){for(var _=t.__positions,i=_.length-1,o=i,l=i;l>0&&_[l]>t.__lastTouchMove-100;l-=2)o=l;if(o!==i){var n=_[i]-_[o],a=t.__scrollTop-_[o-1];t.__decelerationVelocityY=a/n*(1e3/60);Math.abs(t.__decelerationVelocityY)>4&&t.__startDeceleration(e)}}t.__isDecelerating||t.scrollTo(t.__scrollTop),t.__positions.length=0}},__publish:function(e,i){var o=this,l=o.__isAnimating;if(l&&(t.default.stop(l),o.__isAnimating=!1),i){o.__scheduledTop=e;var n=o.__scrollTop,a=e-n;o.__isAnimating=t.default.start(function(e,t,_){o.__scrollTop=n+a*e,o.__callback&&o.__callback(o.__scrollTop)},function(e){return o.__isAnimating===e},function(e,t,_){t===o.__isAnimating&&(o.__isAnimating=!1),(o.__didDecelerationComplete||_)&&o.__scrollingComplete()},i,l?_.easeOutCubic:_.easeInOutCubic)}else o.__scheduledTop=o.__scrollTop=e,o.__callback&&o.__callback(e)},__startDeceleration:function(e){var _=this;_.__minDecelerationScrollTop=_.__minScrollTop,_.__maxDecelerationScrollTop=_.__maxScrollTop;_.__isDecelerating=t.default.start(function(e,t,i){_.__stepThroughDeceleration(i)},function(){var e=Math.abs(_.__decelerationVelocityY)>=.5;return e||(_.__didDecelerationComplete=!0),e},function(e,t,i){_.__isDecelerating=!1,_.__scrollTop<=_.__minScrollTop||_.__scrollTop>=_.__maxScrollTop?_.scrollTo(_.__scrollTop):_.__didDecelerationComplete&&_.__scrollingComplete()})},__stepThroughDeceleration:function(e){var t=this,_=t.__scrollTop+t.__decelerationVelocityY,i=Math.max(Math.min(t.__maxDecelerationScrollTop,_),t.__minDecelerationScrollTop);i!==_&&(_=i,t.__decelerationVelocityY=0),Math.abs(t.__decelerationVelocityY)<=1?Math.abs(_%t.__itemHeight)<1&&(t.__decelerationVelocityY=0):t.__decelerationVelocityY*=.95,t.__publish(_)}};for(var a in n)l.prototype[a]=n[a];module.exports=l;"},"hash":"23eceabf89cceb43014021472ab4abbe"}